<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Changi & Jewel Chatbot</title>
    <style>
        body {font-family: Arial, Helvetica, sans-serif; background: #f5f5f5; margin: 0; padding: 1rem;}
        #chat {max-width: 800px; margin: 0 auto; background: #fff; border: 1px solid #ddd; border-radius: 6px; padding: 1rem; height: 70vh; overflow-y: auto; display: flex; flex-direction: column;}
        .msg {margin: 0.5rem 0; padding: 0.5rem; border-radius: 4px; max-width: 75%;}
        .user {background: #d1e7ff; align-self: flex-end;}
        .bot {background: #e2e2e2; align-self: flex-start;}
        #controls {max-width: 800px; margin: 0 auto; display: flex; margin-top: 1rem;}
        #inputBox {flex: 1; padding: 0.5rem;}
        #sendBtn {padding: 0.55rem 1rem;}
    </style>
</head>
<body>
    <h2>Changi & Jewel Chatbot</h2>
    <div id="chat"></div>
    <div id="controls">
        <input id="inputBox" placeholder="Type your question..." />
        <button id="sendBtn">Send</button>
    </div>
    <script>
        const chatDiv = document.getElementById('chat');
        const input = document.getElementById('inputBox');
        const btn = document.getElementById('sendBtn');
        function addMsg(text, cls) {
            const d = document.createElement('div');
            d.className = 'msg ' + cls;
            d.textContent = text;
            chatDiv.appendChild(d);
            chatDiv.scrollTop = chatDiv.scrollHeight;
        }
        async function send() {
            const q = input.value.trim();
            if (!q) return;
            addMsg(q, 'user');
            input.value = '';
            try {
                const res = await fetch('/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({question: q})
                });
                const data = await res.json();
                addMsg(data.answer, 'bot');
            } catch (e) {
                addMsg('Error: ' + e, 'bot');
            }
        }
        btn.onclick = send;
        input.addEventListener('keydown', e => { if (e.key === 'Enter') send(); });
    </script>
</body>
</html>
